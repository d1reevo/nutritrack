#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

echo "üçé NutriTrack - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫"
echo "=================================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º Node.js
if ! command -v node &> /dev/null; then
    echo "‚ùå Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏ Node.js 16+"
    exit 1
fi

echo "‚úÖ Node.js –Ω–∞–π–¥–µ–Ω: $(node -v)"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—ç–∫–µ–Ω–¥–∞
echo ""
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –±—ç–∫–µ–Ω–¥–∞..."
cd backend
npm install

echo "üóÑÔ∏è  –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
npm run prisma:generate
npm run prisma:migrate

echo ""
echo "‚ö†Ô∏è  –í–∞–∂–Ω–æ: –î–æ–±–∞–≤—å —Å–≤–æ–π GEMINI_API_KEY –≤ backend/.env"
echo "–ü–æ–ª—É—á–∏ –∫–ª—é—á –Ω–∞ https://makersuite.google.com/app/apikey"
echo ""

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞..."
cd ../frontend
npm install

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
echo ""
echo "üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π –≤ –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö:"
echo ""
echo "–¢–µ—Ä–º–∏–Ω–∞–ª 1 (–ë—ç–∫–µ–Ω–¥):"
echo "  cd backend && npm run dev"
echo ""
echo "–¢–µ—Ä–º–∏–Ω–∞–ª 2 (–§—Ä–æ–Ω—Ç–µ–Ω–¥):"
echo "  cd frontend && npm run dev"
echo ""
echo "–û—Ç–∫—Ä–æ–π–∏ http://localhost:3000"
